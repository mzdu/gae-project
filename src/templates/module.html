{% extends "_base2.html" %}
{% block bodyContent %}

{% if error %}
		<p>{{error}}</p>
{% else %}

{% if module_error %}
		<p>{{module_error}}</p>
{% else %}

<script type="text/javascript" src="/static/js/modules/newModule.js"></script>

<div id="moduleWrapper">
	<div class="module">
			<div class="header">
				<span class="title"><a href="{{module_url}}" target="_self">{{module_title_general}}</a></span>
				<br />Version: {{module_version}}

			</div>
			<h3 class="sectionHeader">Key Words:</h3>
			<div class="generalContent">{{module_keywords_general}}</div>
			<h3 class="sectionHeader">Background / Metatheory:</h3>
			<div class="generalContent">{{html}}</div>
			<div class="terms">
				<h3 class="sectionHeader">Terms & Definitions:</h3>
				<ul>
					{% for x in terms %}
						<li><a href="/terms/{{x.term.slug}}">{{x.term.word}}</a> - {{x.definition.definition}}</li>
					{% endfor %}
				</ul>
			</div><!-- end terms -->
			<div class="scope">
				<h3 class="sectionHeader">Scope Conditions:</h3>
				<ol>
						{% for scope in module_scope_general %}
							<li>{{scope}}</li>
						{% endfor %}
				</ol>
			</div><!-- end scope -->
			<div class="propositions">
				<h3 class="sectionHeader">Propositions:</h3>
				<ol>
					{% for prop in module_propositions_general %}
						<li>{{prop}}</li>
					{% endfor %}
				</ol>
			</div><!-- end propositions -->
			<div class="derivations">
				<h3 class="sectionHeader">Derivations:</h3>
				<ol>
					{% for deriv in module_derivations_general %}
						<li>{{deriv}}</li>
					{% endfor %}
				</ol>
			</div><!-- end derivations -->
			<div class="evidence">
				<h3 class="sectionHeader">Evidence:</h3>
				<div>{{module_evidence_general}}</div>
			</div><!-- end evidence -->
	</div>
</div>				
		


<div class="module_sideBar">
	<div class="header">
		  Title: <a href="{{module_url}}" target="_self">{{module_title_general}}</a><br />
		  Version: {{module_version}} / {{module_newest_version}}<br />
		   <form method="post" action="">
				  History: <select name="version">
				  {% for version in versions %}
				      <option value="{{version}}">{{version}}</option>
				  {% endfor %}
				  </select>
				  <input type="submit" value="Go" />
				  <input type="hidden" name="module_version_uid" value="{{module_uid}}" />
			</form>
	</div>
			
	<div class="intro">
		<div class="metaData">
			<span class="descriptor">Contributor:</span> <a href="/users/{{module_contrubutor_general.uid}}/" target="_self">{{module_contrubutor_general.alias}}</a> <br />
			<span class="descriptor">Updated:</span> {{module_last_update_general}}
			
			{% if module_newest_version == 0 or module_version > module_newest_version %}
			<span class="descriptor">Status: Unpublished</span> 
			{% else %}
			{% endif %}
			
		</div><br class="clear" />
	</div>
	
	<div class="toolkit">
		<div>
		
			{% if contributing_user %}
				{% if module_version > module_newest_version or module_version == 0 %}
				<img src='/static/images/toolkit.jpg' style="width:20px"/><br/>
			 		[<a href="{{module_edit_url}}" target="_self">Edit</a>]
			 		[<a href="javascript:sendForm()" target="_self">Send for Approval</a>]<br />
			 	{% elif module_version == module_newest_version %}
			 	<img src='/static/images/toolkit.jpg' style="width:20px"/><br/>
			 		[<a href="{{module_edit_url}}" target="_self">Suggest Modifications</a>]<br />
			 	{% else %}
			 		
			 	{% endif %}
			 
			{% else %}
			</ul>
			{% endif %}
		</div>
	</div>	
</div>	
{% endif %}	
{% endif %}
{% endblock %}
